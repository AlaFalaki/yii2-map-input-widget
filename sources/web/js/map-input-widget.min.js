function MapInputWidgetManager(){const e=".kolyunya-map-input-widget";var t=this;var n=Array();var r=function(e){if(!$(e).data("initialized")){var t=new MapInputWidget(e);t.initialize();return t}return null};var i=function(e){var t=e.getId();n[t]=e};this.initializeWidgets=function(){$(e).each(function(e,t){var n=r(t);if(n){i(n)}})};this.getWidget=function(e){var t=n[e];return t}}function MapInputWidget(e){const t="input.kolyunya-map-input-widget-input";const n="div.kolyunya-map-input-widget-canvas";var r=this;var i;var s;var o;var u=function(){i=$(e).find(t).get(0);s=$(e).find(n).get(0)};var a=function(){o=new google.maps.Map(s,{mapTypeId:$(e).data("map-type"),center:d(),zoom:$(e).data("zoom"),styles:[{featureType:"poi",stylers:[{visibility:"off"}]}],mapTypeControlOptions:{mapTypeIds:[]}});google.maps.event.addListener(o,"click",function(e){r.setPosition({latitude:e.latLng.lat(),longitude:e.latLng.lng()})})};var f=function(){var t=h();r.setPosition(t);$(e).data("initialized",true)};var l=function(e){var t=v();var n=m(e);t=t.replace(/%latitude%/g,n.lat());t=t.replace(/%longitude%/g,n.lng());return t};var c=function(){var e=$(i).prop("value")!="";return e};var h=function(){var e;var t=v();var n=t.indexOf("%latitude%")<t.indexOf("%longitude%");var r=$(i).prop("value");if(r!==""){var s=r.match(/[\d.]+/)[0];var o=r.match(/[\d.]+/)[0];e=new google.maps.LatLng(s,o)}else{e=null}return e};var p=function(){var t=$(e).data("latitude");var n=$(e).data("longitude");var r=new google.maps.LatLng(t,n);return r};var d=function(){var e;if(c()){e=h()}else{e=p()}return e};var v=function(){var t=$(e).data("pattern");return t};var m=function(e){var t;if(e.latitude!==undefined&&e.longitude!==undefined){var n=e.latitude;var r=e.longitude;t=new google.maps.LatLng(n,r)}else{t=e}return t};this.initialize=function(){u();a();f()};this.getId=function(){var t=$(e).prop("id");return t};this.setPosition=function(t){if(o.marker){o.marker.setMap(null)}if(t===null){$(i).prop("disabled",true);return}else{$(i).prop("disabled",false)}var n=m(t);if($(e).data("align-map-center")===1){o.panTo(n)}var s=null;if($(e).data("animate-marker")===1){s=google.maps.Animation.DROP}o.marker=new google.maps.Marker({map:o,position:n,draggable:true,animation:s});google.maps.event.addListener(o.marker,"dragend",function(){r.setPosition(this.getPosition())});var u=$(e).data("pattern");var a=l(n);$(i).prop("value",a)};this.panTo=function(e){var t=m(e);o.panTo(t)};this.setZoom=function(e){o.setZoom(e)}}var mapInputWidgetManager;$(window).load(function(){mapInputWidgetManager=new MapInputWidgetManager;mapInputWidgetManager.initializeWidgets()})